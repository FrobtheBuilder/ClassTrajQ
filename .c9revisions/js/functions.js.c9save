{"ts":1361387130404,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$.ajaxSetup({\r\n  \turl: backend,\r\n  \tdataType: 'jsonp',\r\n  \ttype: 'GET'\r\n});\r\n\r\n$( document ).bind( \"mobileinit\", function() {\r\n    // Make your jQuery Mobile framework configuration changes here!\r\n    $.support.cors = true;\r\n    $.mobile.allowCrossDomainPages = true;\r\n    $.extend($.mobile.zoom, {locked:true,enabled:false});\r\n});\r\n\r\n$(document).on('pageshow', function() {\r\n\tlogincheck();\r\n\troster = new classList();\r\n\tread(roster, false);\r\n\t$(\".classlist\").listview('refresh');\r\n\r\n\t$(\".addbutton\").on(\"mousedown\", function() {\r\n\t\twrite(roster, false);\r\n\t\twindow.location = \"add.html\"\r\n\t\t//$.mobile.changePage('add.html', {transition: 'pop', /*role: 'dialog'*/});   \r\n\t});\r\n\r\n\t$(\".menubutton\").on(\"mousedown\", function() {\r\n\t\t$(\".menupop\").popup(\"open\");\r\n\t})\r\n\r\n\t$(\".logout\").on(\"mousedown\", function() {\r\n\t\t$.ajax({\r\n\t\t\tdata: {\r\n\t\t\t\taction: \"logout\"\r\n\t\t\t},\r\n\t\t\tsuccess: function(response) {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tif (response.loggedin == false) {\r\n\t\t\t\t\twindow.location = \"login.html\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\t$(\".errorclose\").on(\"mousedown\", function() {\r\n\t\t$( \".errorpop\" ).popup( \"close\" );\r\n\t\t$( \".addpop\" ).popup( \"open\" );\r\n\t});\r\n\r\n\t$(\".switchbutton\").on(\"mousedown\", function() {\r\n\t\tread(roster, true);\r\n\t\t$(\".classlist\").listview('refresh');\r\n\t});\r\n\r\n\tsetInterval(function () {\r\n\t\tread(roster, false);\r\n\t\t$(\".classlist\").listview('refresh');\r\n\t}, 5000)\r\n\r\n\tsetInterval(function() {\r\n\t\t$(\".currenttime\").html(new Date().toString(\"hh:mm tt\"))\r\n\t}, 1000)\r\n\r\n\r\n});\r\n\r\nfunction addClasses(jsonclass) {\r\n\t$(\".classlist\").html(\"\");\r\n\taday = jsonclass.a;\r\n\tbday = jsonclass.b;\r\n\taddElements(aday);\r\n\t\r\n}\r\n\r\n\r\nfunction addElements(classlist) {\r\n\tfor (var i=0; i<classlist.length; i++) {\r\n\t\tvar start = new Date();\r\n\t\tstart = Date.parse(classlist[i].startTime);\r\n\t\tend = Date.parse(classlist[i].endTime);\r\n\t\tconsole.log(start.toString(\"hh:mm tt\"));\r\n\t\t$(\".classlist\").append(\"<li>\" + '<a href=\".html\">' + classlist[i].class + '<p class=\"time\">' + start.toString(\"hh:mm tt\") + \" - \" + end.toString(\"hh:mm tt\") + '</p></a></li>');\r\n\t}\r\n\t$(\".classlist\").listview('refresh');\r\n}\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":2093}]],"length":2093}
